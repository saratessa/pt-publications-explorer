"0","bslib::layout_columns("
"0","  col_widths = c(4, 8),"
"0",""
"0","  # Left: Filters"
"0","  bslib::card("
"0","    bslib::card_header(""Filters""),"
"0","    bslib::card_body("
"0","      tagList("
"0","        crosstalk::filter_slider(""year"",   ""Year"",             sd, ~year),"
"0","        crosstalk::filter_select(""type"",   ""Publication type"", sd, ~publicationtype, multiple = TRUE),"
"0","        crosstalk::filter_select(""focus"",  ""Focus area"",       sd, ~focusarea,       multiple = TRUE),"
"0","        div(style=""margin-top:.25rem; font-size: .9rem; opacity: .8;"","
"0","            ""Tip: Use the table’s global search for author names or topic keywords."")"
"0","      )"
"0","    )"
"0","  ),"
"0",""
"0","  # Right: Stats"
"0","  {"
"0","    stats_df <- pubs |>"
"0","      summarise("
"0","        `Total publications`    = n(),"
"0","        `Year span`             = paste0(min(year, na.rm = TRUE), ""–"", max(year, na.rm = TRUE)),"
"0","        `Unique author entries` = dplyr::n_distinct(author),"
"0","        `Focus areas`           = dplyr::n_distinct(focusarea)"
"0","      )"
"0",""
"0","    bslib::layout_column_wrap("
"0","      width = 1/2,"
"0","      heights_equal = ""all"","
"0","      bslib::card(bslib::card_body("
"0","        h3(stats_df$`Total publications`), div(style=""opacity:.75;"", ""Publications"")"
"0","      )),"
"0","      bslib::card(bslib::card_body("
"0","        h3(stats_df$`Year span`), div(style=""opacity:.75;"", ""Year span"")"
"0","      )),"
"0","      bslib::card(bslib::card_body("
"0","        h3(stats_df$`Unique author entries`), div(style=""opacity:.75;"", ""Unique author entries"")"
"0","      )),"
"0","      bslib::card(bslib::card_body("
"0","        h3(stats_df$`Focus areas`), div(style=""opacity:.75;"", ""Focus areas"")"
"0","      ))"
"0","    )"
"0","  }"
"0",")"
